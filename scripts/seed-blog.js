// scripts/seed-blog.js - Run this script to add sample blog posts
require("dotenv").config();
const pool = require("../config/db");

// Sample blog posts
const samplePosts = [
  {
    title: "Как да започнете да инвестирате - ръководство за начинаещи",
    content: `<p>Инвестирането е едно от най-ефективните средства за увеличаване на вашето благосъстояние с течение на времето. Хората, които стартират своя инвестиционен път по-рано, обикновено имат по-големи шансове да постигнат своите финансови цели.</p>
    
    <h2>Защо да инвестирате?</h2>
    <p>Има няколко основни причини, поради които инвестирането е важно:</p>
    <ul>
      <li>Борба с инфлацията - ако държите парите си в брой или в банкова сметка с ниска лихва, те губят стойност с течение на времето</li>
      <li>Натрупване на богатство - инвестирането позволява да се възползвате от силата на сложната лихва</li>
      <li>Постигане на финансови цели - независимо дали става въпрос за пенсиониране, закупуване на дом или плащане на образование</li>
    </ul>
    
    <h2>Как да започнете?</h2>
    <p>Ето няколко стъпки, които ще ви помогнат да започнете вашето инвестиционно пътуване:</p>
    
    <h3>1. Създайте финансова основа</h3>
    <p>Преди да започнете да инвестирате, трябва да имате стабилна финансова основа. Това включва:</p>
    <ul>
      <li>Изплащане на високолихвени дългове (кредитни карти, бързи кредити)</li>
      <li>Създаване на спешен фонд, който покрива 3-6 месеца от разходите ви</li>
      <li>Изграждане на бюджет, който позволява редовно спестяване</li>
    </ul>
    
    <h3>2. Определете своите цели</h3>
    <p>Инвестициите трябва да съответстват на вашите финансови цели, времеви хоризонт и толерантност към риска:</p>
    <ul>
      <li>Краткосрочни цели (1-3 години): по-нискорискови инвестиции</li>
      <li>Средносрочни цели (3-10 години): балансиран портфейл</li>
      <li>Дългосрочни цели (над 10 години): потенциално по-високорискови инвестиции</li>
    </ul>
    
    <h3>3. Разберете основните видове инвестиции</h3>
    <p>Запознайте се с различните класове активи:</p>
    <ul>
      <li><strong>Акции:</strong> Част от собствеността на компания, с потенциал за висока възвръщаемост, но и по-висок риск</li>
      <li><strong>Облигации:</strong> Дългови ценни книжа, обикновено с по-ниска възвръщаемост, но и по-нисък риск</li>
      <li><strong>Взаимни фондове и ETF:</strong> Колективни инвестиционни схеми, които предлагат разнообразие с една инвестиция</li>
      <li><strong>Недвижими имоти:</strong> Могат да осигурят доход от наем и увеличаване на стойността</li>
    </ul>
    
    <h3>4. Започнете да инвестирате редовно</h3>
    <p>Инвестирайте редовно, независимо от сумата. Стратегията за усредняване на цената (dollar-cost averaging) е ефективен начин за дългосрочно натрупване на богатство.</p>
    
    <h3>5. Диверсифицирайте вашите инвестиции</h3>
    <p>Не слагайте всичките си яйца в една кошница. Разпределете инвестициите си между различни класове активи, сектори и географски региони.</p>
    
    <h2>Заключение</h2>
    <p>Инвестирането не трябва да бъде сложно или плашещо. Запомнете, че най-важното е да започнете и да останете последователни. Със времето, малките суми могат да се превърнат в значително богатство благодарение на силата на сложната лихва.</p>
    
    <p>Използвайте FinTrack, за да следите своите инвестиции и да наблюдавате как расте вашето богатство с течение на времето!</p>`,
    author_id: 1 // Make sure this user exists in your database and is an admin
  },
  {
    title: "5 стратегии за управление на личните финанси",
    content: `<p>Управлението на личните финанси е от решаващо значение за постигане на финансова стабилност и независимост. Независимо дали искате да излезете от дълговете, да спестите за пенсиониране или просто да подобрите финансовото си здраве, тези пет стратегии ще ви помогнат да поемете контрол над вашите финанси.</p>
    
    <h2>1. Създайте и следвайте бюджет</h2>
    <p>Бюджетът е основният инструмент за управление на личните финанси. Той ви позволява да проследявате приходите и разходите си, да идентифицирате области, в които харчите твърде много, и да определите колко можете да спестявате всеки месец.</p>
    
    <p>Стъпки за създаване на ефективен бюджет:</p>
    <ul>
      <li>Изчислете общия си месечен доход</li>
      <li>Проследете всичките си разходи за един месец</li>
      <li>Категоризирайте разходите (основни нужди, желания, спестявания)</li>
      <li>Определете цели за всяка категория</li>
      <li>Редовно преглеждайте и коригирайте бюджета си</li>
    </ul>
    
    <h2>2. Изградете спешен фонд</h2>
    <p>Спешният фонд е ваша финансова защитна мрежа в случай на неочаквани разходи или загуба на доход. Идеалният спешен фонд трябва да покрива 3-6 месеца от вашите основни разходи.</p>
    
    <p>Съвети за изграждане на спешен фонд:</p>
    <ul>
      <li>Започнете с малка цел, например 1000 лв.</li>
      <li>Автоматизирайте спестяванията си</li>
      <li>Съхранявайте средствата в лесно достъпна, но отделна сметка</li>
      <li>Използвайте спешния фонд само за истински спешни случаи</li>
    </ul>
    
    <h2>3. Намалете и управлявайте дълговете си</h2>
    <p>Високите лихви по дълговете могат да попречат на финансовия ви напредък. Разработването на стратегия за намаляване на дълговете е ключова стъпка към финансовата свобода.</p>
    
    <p>Стратегии за управление на дълга:</p>
    <ul>
      <li><strong>Метод на лавината:</strong> Фокусирайте се върху изплащането на дълга с най-висока лихва, докато правите минимални плащания по останалите.</li>
      <li><strong>Метод на снежната топка:</strong> Започнете с изплащане на най-малкия дълг, за да създадете инерция.</li>
      <li><strong>Консолидиране на дълга:</strong> Обединете няколко дълга в един с по-ниска лихва.</li>
      <li><strong>Рефинансиране:</strong> Договорете по-ниски лихвени проценти, когато е възможно.</li>
    </ul>
    
    <h2>4. Автоматизирайте спестяванията и инвестициите</h2>
    <p>Автоматизирането на финансите ви прави спестяването и инвестирането по-лесно и премахва емоционалния елемент от процеса на вземане на решения.</p>
    
    <p>Как да автоматизирате финансите си:</p>
    <ul>
      <li>Настройте автоматични трансфери към спестовна сметка</li>
      <li>Участвайте в пенсионни планове на работното място</li>
      <li>Използвайте приложения за закръгляне на покупки и автоматично инвестиране на дребни суми</li>
      <li>Настройте автоматични плащания на сметки, за да избегнете закъснения и такси</li>
    </ul>
    
    <h2>5. Инвестирайте за дългосрочен растеж</h2>
    <p>Инвестирането е от решаващо значение за изграждане на богатство и постигане на дългосрочни финансови цели като пенсиониране.</p>
    
    <p>Основни принципи на инвестирането:</p>
    <ul>
      <li><strong>Започнете рано:</strong> Възползвайте се от силата на сложната лихва</li>
      <li><strong>Диверсифицирайте:</strong> Разпределете инвестициите си между различни класове активи</li>
      <li><strong>Инвестирайте редовно:</strong> Използвайте стратегията за усредняване на цените (dollar-cost averaging)</li>
      <li><strong>Мислете дългосрочно:</strong> Игнорирайте краткосрочната пазарна волатилност</li>
      <li><strong>Минимизирайте таксите:</strong> Високите такси могат значително да намалят вашата възвръщаемост</li>
    </ul>
    
    <h2>Заключение</h2>
    <p>Управлението на личните финанси е непрекъснат процес, който изисква последователност и дисциплина. Като прилагате тези пет стратегии, вие ще поставите здрава основа за финансов успех и ще се приближите до постигането на вашите финансови цели.</p>
    
    <p>Не забравяйте, че малките промени, направени последователно с течение на времето, могат да доведат до значителни резултати. Започнете днес и използвайте FinTrack, за да следите вашия напредък към финансова свобода!</p>`,
    author_id: 1
  },
  {
    title: "Разбиране на криптовалутите: повече от просто биткойн",
    content: `<p>Криптовалутите революционизираха финансовия свят и промениха начина, по който мислим за пари, инвестиции и финансови транзакции. Въпреки че Биткойн е най-известната криптовалута, екосистемата включва хиляди различни проекти с разнообразни цели и технологии.</p>
    
    <h2>Какво представляват криптовалутите?</h2>
    <p>Криптовалутите са цифрови или виртуални валути, които използват криптография за сигурност и функционират на базата на технологията блокчейн - децентрализиран публичен регистър, поддържан от мрежа от компютри.</p>
    
    <p>Основни характеристики на криптовалутите:</p>
    <ul>
      <li><strong>Децентрализация:</strong> Не се контролират от централни органи като правителства или банки</li>
      <li><strong>Прозрачност:</strong> Всички транзакции са публично видими в блокчейна</li>
      <li><strong>Ограничено предлагане:</strong> Много криптовалути имат ограничено предлагане, което може да ги направи хедж срещу инфлацията</li>
      <li><strong>Псевдонимност:</strong> Потребителите могат да притежават криптовалути без да разкриват самоличността си</li>
    </ul>
    
    <h2>Отвъд Биткойн: Разнообразие в криптовалутната екосистема</h2>
    
    <h3>Ethereum (ETH)</h3>
    <p>Докато Биткойн е създаден предимно като алтернатива на фиатните валути, Ethereum е платформа, която позволява изграждането на децентрализирани приложения (dApps) и смарт договори. Етер (ETH) е нативната криптовалута на мрежата Ethereum.</p>
    
    <h3>Stablecoins</h3>
    <p>Стейблкойните са криптовалути, чиято стойност е привързана към друг актив, обикновено доларът. Те предлагат стабилност в един иначе волатилен пазар. Примери включват:</p>
    <ul>
      <li><strong>Tether (USDT):</strong> Привързан към щатския долар</li>
      <li><strong>USD Coin (USDC):</strong> Обезпечен с долари в банкови сметки</li>
      <li><strong>DAI:</strong> Децентрализиран стейблкойн, обезпечен с други криптовалути</li>
    </ul>
    
    <h3>Utility Tokens</h3>
    <p>Тези токени имат специфично предназначение в рамките на своите блокчейн проекти. Те могат да предоставят достъп до услуги, да дават право на глас в управлението или да имат други специфични функции.</p>
    
    <h3>Privacy Coins</h3>
    <p>Фокусирани върху осигуряването на анонимност и поверителност на транзакциите. Примери включват Monero (XMR) и Zcash (ZEC).</p>
    
    <h2>Разбиране на рисковете</h2>
    <p>Въпреки потенциала за високи печалби, инвестирането в криптовалути носи значителни рискове:</p>
    <ul>
      <li><strong>Волатилност:</strong> Цените могат да се променят драстично в кратки периоди</li>
      <li><strong>Регулаторен риск:</strong> Промените в законодателството могат да окажат голямо влияние върху криптовалутите</li>
      <li><strong>Сигурност:</strong> Хакерски атаки и измами са често срещани в криптопространството</li>
      <li><strong>Ликвидност:</strong> По-малките криптовалути могат да бъдат трудни за продажба</li>
    </ul>
    
    <h2>Отговорно инвестиране в криптовалути</h2>
    <p>Ако решите да инвестирате в криптовалути, ето някои принципи, които трябва да следвате:</p>
    <ul>
      <li><strong>Инвестирайте само това, което можете да си позволите да загубите:</strong> Поради високата волатилност, криптовалутите трябва да бъдат само малка част от диверсифициран портфейл</li>
      <li><strong>Направете проучване:</strong> Разберете технологията и екипа зад проекта</li>
      <li><strong>Сигурно съхранение:</strong> Използвайте хардуерни портфейли за по-големи суми</li>
      <li><strong>Дългосрочна перспектива:</strong> Фокусирайте се върху дългосрочния потенциал, а не върху краткосрочните печалби</li>
    </ul>
    
    <h2>Заключение</h2>
    <p>Криптовалутите представляват вълнуваща нова граница във финансите, но както всяка нова технология, те носят както възможности, така и рискове. Чрез образоване и внимателен подход, можете да навигирате в този нов финансов пейзаж.</p>
    
    <p>Използвайте FinTrack, за да следите вашите криптоинвестиции заедно с останалите активи в портфолиото ви и да получите цялостна представа за вашето финансово състояние.</p>`,
    author_id: 1
  }
];

async function seedBlogPosts() {
  try {
    console.log("Starting blog post seeding...");
    
    // Check if there are already posts in the database
    const [existingPosts] = await pool.query("SELECT COUNT(*) as count FROM blog_post");
    
    if (existingPosts[0].count > 0) {
      console.log(`Database already has ${existingPosts[0].count} blog posts. Skipping seeding.`);
      console.log("If you want to add more posts, you can modify this script.");
      return;
    }
    
    // Check if the admin user exists
    const [adminUsers] = await pool.query("SELECT id FROM users WHERE isAdmin = 1 LIMIT 1");
    
    if (adminUsers.length === 0) {
      console.warn("Warning: No admin users found in the database. Make sure to set isAdmin = 1 for at least one user.");
      console.log("Creating posts with author_id = 1. Make sure this user exists!");
    } else {
      // Use the first admin user as the author
      const adminId = adminUsers[0].id;
      console.log(`Using admin user with ID ${adminId} as the author for seed posts.`);
      
      // Update the author_id for all sample posts
      samplePosts.forEach(post => {
        post.author_id = adminId;
      });
    }
    
    // Insert the sample posts
    for (const post of samplePosts) {
      const [result] = await pool.query(
        "INSERT INTO blog_post (title, content, author_id) VALUES (?, ?, ?)",
        [post.title, post.content, post.author_id]
      );
      
      console.log(`Added blog post: ${post.title} (ID: ${result.insertId})`);
    }
    
    console.log("Blog post seeding completed successfully!");
  } catch (error) {
    console.error("Error seeding blog posts:", error);
  } finally {
    // Close the database connection
    pool.end();
  }
}

// Run the seed function
seedBlogPosts();